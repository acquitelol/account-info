const h=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const e=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const u=window.enmity.modules.common.Toasts;window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const O=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes;const C=window.enmity.modules.common.Moment,{components:n}=window.enmity;n.Alert,n.Button,n.FlatList,n.Image,n.ImageBackground,n.KeyboardAvoidingView,n.Modal;const N=n.Pressable;n.RefreshControl;const oe=n.ScrollView;n.SectionList,n.StatusBar,n.StyleSheet,n.Switch;const P=n.Text;n.TextInput,n.TouchableHighlight,n.TouchableOpacity,n.TouchableWithoutFeedback,n.Touchable;const $=n.View;n.VirtualizedList,n.Form,n.FormArrow,n.FormCTA,n.FormCTAButton,n.FormCardSection,n.FormCheckbox;const f=n.FormDivider;n.FormHint,n.FormIcon,n.FormInput,n.FormLabel,n.FormRadio;const a=n.FormRow,_=n.FormSection;n.FormSelect,n.FormSubLabel;const v=n.FormSwitch;n.FormTernaryCheckBox,n.FormText,n.FormTextColors,n.FormTextSizes;function le(t){window.enmity.plugins.registerPlugin(t)}function i(t){return window.enmity.assets.getIDByName(t)}const y={byProps:(...t)=>window.enmity.modules.filters.byProps(...t),byName:(t,o)=>window.enmity.modules.filters.byName(t,o),byTypeName:(t,o)=>window.enmity.modules.filters.byTypeName(t,o),byDisplayName:(t,o)=>window.enmity.modules.filters.byDisplayName(t,o)};function z(...t){return window.enmity.modules.bulk(...t)}function ae(...t){return window.enmity.modules.getByProps(...t)}window.enmity.modules.common;function G(t,o,l){return window.enmity.utilities.findInReactTree(t,o,l)}function ie(t){return window.enmity.patcher.create(t)}var re="AccountInfo",H="1.7.1",ce="Shows Account Information and Account Assets.",q="development",me=[{name:"acquite",id:"581573474296791211"}],se="#ff1f84",ue={name:re,version:H,description:ce,release:q,authors:me,color:se};const[de,pe]=z(y.byProps("transitionToGuild"),y.byProps("setString"));var ge=({settings:t})=>{const o=i("ic_selection_checked_24px"),l=O.createThemedStyleSheet({icon:{color:h.ThemeColorMap.INTERACTIVE_NORMAL}});return e.createElement(e.Fragment,null,e.createElement(oe,null,e.createElement(_,{title:"Enable Account Date Information"},e.createElement(a,{label:"Time of Creation",subLabel:"Show when an account was Created",leading:e.createElement(a.Icon,{style:l.icon,source:i("ic_header_members_add_24px")}),trailing:e.createElement(v,{value:t.getBoolean("createBtn",!0),onValueChange:()=>{t.toggle("createBtn",!0),u.open({content:`Successfully ${t.getBoolean("createBtn",!0)?"enabled":"disabled"} time of Account Creation.`,source:o})}})}),e.createElement(f,null),e.createElement(a,{label:"Time of Joining Server",subLabel:"Show when an account joined a server",leading:e.createElement(a.Icon,{style:l.icon,source:i("ic_leave_24px")}),trailing:e.createElement(v,{value:t.getBoolean("joinBtn",!0),onValueChange:()=>{t.toggle("joinBtn",!0),u.open({content:`Successfully ${t.getBoolean("joinBtn",!0)?"enabled":"disabled"} time of Joining Server.`,source:o})}})})),e.createElement(f,null),e.createElement(_,{title:"Enable Dedicated Buttons"},e.createElement(a,{label:"Profile Picture",subLabel:"Show dedicated button to view a user's PFP.",leading:e.createElement(a.Icon,{style:l.icon,source:i("img_nitro_profile_banner")}),trailing:e.createElement(v,{value:t.getBoolean("pfpBtn",!1),onValueChange:()=>{t.toggle("pfpBtn",!1),u.open({content:`Successfully ${t.getBoolean("pfpBtn",!1)?"enabled":"disabled"} dedicated PFP Button.`,source:o})}})}),e.createElement(f,null),e.createElement(a,{label:"Status",subLabel:"Show dedicated button to copy a user's Status",leading:e.createElement(a.Icon,{style:l.icon,source:i("ic_passport_24px")}),trailing:e.createElement(v,{value:t.getBoolean("statusBtn",!1),onValueChange:()=>{t.toggle("statusBtn",!1),u.open({content:`Successfully ${t.getBoolean("statusBtn",!1)?"enabled":"disabled"} dedicated Status Button.`,source:o})}})})),e.createElement(f,null),e.createElement(_,{title:"Disable Entire Plugin"},e.createElement(a,{label:"Disable Plugin",leading:e.createElement(a.Icon,{style:l.icon,source:i("ic_rulebook_16px")}),trailing:e.createElement(v,{value:t.getBoolean("masterDisable",!1),onValueChange:()=>{t.toggle("masterDisable",!1),u.open({content:`Successfully ${t.getBoolean("masterDisable",!1)?"disabled":"enabled"} AccountInfo.`,source:o})}})})),e.createElement(f,null),e.createElement(_,{title:"Source Code"},e.createElement(a,{label:"Download",subLabel:"Copy the link of the plugin to Clipboard.",leading:e.createElement(a.Icon,{style:l.icon,source:i("toast_copy_link")}),trailing:a.Arrow,onPress:()=>{pe.setString("https://raw.githubusercontent.com/acquitelol/account-info/main/dist/AccountInfo.js"),u.open({content:"Copied to clipboard",source:i("pending-alert")})}}),e.createElement(a,{label:"Source",subLabel:"Open the Repo of the Plugin Externally",leading:e.createElement(a.Icon,{style:l.icon,source:i("ic_leave_stage")}),trailing:a.Arrow,onPress:()=>{de.openURL("https://github.com/acquitelol/account-info")}})),e.createElement(a,{label:`Plugin Version: ${H}
Release Channel: ${q}`})))};function d(t,o,l){return window.enmity.settings.getBoolean(t,o,l)}function we(t,o,l){window.enmity.settings.toggle(t,o,l)}const[J,ye,be,L,Y,fe,K]=z(y.byDisplayName("UserProfileHeader",!1),y.byProps("getMember"),y.byProps("getGuild"),y.byProps("transitionToGuild"),y.byProps("setString"),y.byName("HeaderAvatar",!1),y.byName("ProfileBanner",!1)),A=ie("account-info"),Ee=ae("getStatus","getState"),Se={...ue,onStart(){A.instead(J,"default",(t,o,l)=>{var p,g,c,E;let m=d("AccountInfo","pfpBtn",!1),w=d("AccountInfo","statusBtn",!1),S=d("AccountInfo","createBtn",!0),R=d("AccountInfo","joinBtn",!0),X=d("AccountInfo","masterDisable",!1);const[{user:r,channel:T,type:W,bannerSource:he}]=o;if(W!==0)return l.apply(t,o);const s=O.createThemedStyleSheet({container:{marginLeft:15.5,marginRight:15.5,marginTop:17.5},header:{color:h.ThemeColorMap.HEADER_SECONDARY,opacity:.975,fontFamily:h.Fonts.DISPLAY_BOLD,textTransform:"uppercase",fontSize:12.75,letterSpacing:.25},information:{borderRadius:4,backgroundColor:h.ThemeColorMap.BACKGROUND_TERTIARY,marginTop:10,marginBottom:10},item:{color:h.ThemeColorMap.TEXT_MUTED},icon:{color:h.ThemeColorMap.INTERACTIVE_NORMAL}}),x=i("img_nitro_profile_banner"),Q=i("pending-alert"),Z=i("toast_copy_link"),V=i("ic_header_members_add_24px"),k=i("ic_leave_24px"),B=T==null?void 0:T.guild_id,b=B&&ye.getMember(T.guild_id,r.id),M=B&&be.getGuild(T.guild_id),F=B?((p=b==null?void 0:b.getAvatarURL)==null?void 0:p.call(b,!1,4096,!0))||((g=r==null?void 0:r.getAvatarURL)==null?void 0:g.call(r,!1,4096,!0)):(c=r==null?void 0:r.getAvatarURL)==null?void 0:c.call(r,!1,4096,!0);if(!F)return l.apply(t,o);const ee=r.discriminator%5,te=typeof F=="number"?`https://cdn.discordapp.com/embed/avatars/${ee}.png`:F==null?void 0:F.replace(".webp",".png"),I=Ee.getActivities(r.id).find(U=>U.type===4);return X?e.createElement(e.Fragment,null,l.apply(t,o)):e.createElement(e.Fragment,null,l.apply(t,o),e.createElement($,{style:s.container},S||R?e.createElement(e.Fragment,null,e.createElement(P,{style:s.header},"Account Information"),e.createElement($,{style:s.information},S&&e.createElement(e.Fragment,null,e.createElement(a,{label:"Created",leading:e.createElement(a.Icon,{style:s.icon,source:V}),onPress:()=>{u.open({content:C(r.createdAt).format("LLL"),source:V})},trailing:()=>e.createElement(P,{style:s.item},C(r.createdAt).fromNow())})),S&&R&&B&&b&&e.createElement(f,null),R&&B&&b&&e.createElement(e.Fragment,null,e.createElement(a,{label:`Joined ${(E=M==null?void 0:M.name)!=null?E:""}`,leading:e.createElement(a.Icon,{style:s.icon,source:k}),onPress:()=>{u.open({content:C(b.joinedAt).format("LLL"),source:k})},trailing:()=>e.createElement(P,{style:s.item},C(b.joinedAt).fromNow())})))):e.createElement(e.Fragment,null),m||w?e.createElement(e.Fragment,null,e.createElement(P,{style:s.header},"Account Assets"),e.createElement($,{style:s.information},m&&e.createElement(a,{label:`View ${r.username}'s Profile Picture`,leading:e.createElement(a.Icon,{style:s.icon,source:x}),trailing:e.createElement(e.Fragment,null,e.createElement(v,{value:d("AccountInfo","pfpBtn",!0),onValueChange:()=>{we("AccountInfo","pfpBtn",!0),u.open({content:`Switched to ${d("AccountInfo","pfpBtn",!0)?"banner":"profile picture"} link.`,source:x})}}),a.Arrow),onPress:()=>{d("AccountInfo","pfpBtn",!0)?L.openURL(te):A.after(K,"default",(U,[{bannerSource:D}],j)=>{if(typeof(D==null?void 0:D.uri)!="string"||!j)return j;const ne=D.uri.replace(/(?:\?size=\d{3,4})?$/,"?size=4096").replace(".webp",".png");return L.openURL(ne)})}}),m&&w&&e.createElement(f,null),I&&w&&e.createElement(e.Fragment,null,e.createElement(a,{label:`Copy ${r.username}'s Status`,leading:e.createElement(a.Icon,{style:s.icon,source:Z}),trailing:a.Arrow,onPress:()=>{Y.setString(`${I.emoji.name?`:${I.emoji.name}:`:""} ${I.state?I.state:""}`),u.open({content:"Copied to clipboard",source:Q})}})))):e.createElement(e.Fragment,null)))}),A.after(fe,"default",(t,[{user:o}],l)=>{var p;let g=d("AccountInfo","pfpBtn",!1);const c=(p=o==null?void 0:o.getAvatarURL)==null?void 0:p.call(o,!1,4096,!0);if(!c)return l;const E=o.discriminator%5,m=typeof c=="number"?`https://cdn.discordapp.com/embed/avatars/${E}.png`:c==null?void 0:c.replace(".webp",".png");return g?e.createElement(e.Fragment,null,l):e.createElement(N,{onPress:()=>L.openURL(m)},l)}),A.after(K,"default",(t,[{bannerSource:o}],l)=>{let p=d("AccountInfo","pfpBtn",!1);if(typeof(o==null?void 0:o.uri)!="string"||!l)return l;const g=o.uri.replace(/(?:\?size=\d{3,4})?$/,"?size=4096").replace(".webp",".png");return p?e.createElement(e.Fragment,null,l):e.createElement(N,{onPress:()=>L.openURL(g)},l)}),A.after(J,"default",(t,o,l)=>{const p=G(l,m=>{var w;return(w=m==null?void 0:m.props)==null?void 0:w.customStatusActivity});if(!p)return l;const g=G(l,m=>{var w,S;return(S=(w=m==null?void 0:m[2])==null?void 0:w.props)==null?void 0:S.customStatusActivity});if(!g||d("AccountInfo","statusBtn",!1))return l;const c=g[2].props.customStatusActivity,E=i("pending-alert");g[2]=e.createElement(N,{onPress:()=>{Y.setString(`${c.emoji.name?`:${c.emoji.name}:`:""} ${c.state?c.state:""}`),u.open({content:"Copied to clipboard",source:E})}},p)})},onStop(){A.unpatchAll()},getSettingsPanel({settings:t}){return e.createElement(ge,{settings:t})}};le(Se);
