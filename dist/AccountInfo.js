const S=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const e=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const m=window.enmity.modules.common.Toasts;window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const j=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes;const L=window.enmity.modules.common.Moment,{components:n}=window.enmity;n.Alert,n.Button,n.FlatList,n.Image,n.ImageBackground,n.KeyboardAvoidingView,n.Modal;const $=n.Pressable;n.RefreshControl;const ee=n.ScrollView;n.SectionList,n.StatusBar,n.StyleSheet,n.Switch;const P=n.Text;n.TextInput,n.TouchableHighlight,n.TouchableOpacity,n.TouchableWithoutFeedback,n.Touchable;const x=n.View;n.VirtualizedList,n.Form,n.FormArrow,n.FormCTA,n.FormCTAButton,n.FormCardSection,n.FormCheckbox;const E=n.FormDivider;n.FormHint,n.FormIcon,n.FormInput,n.FormLabel,n.FormRadio;const a=n.FormRow,R=n.FormSection;n.FormSelect,n.FormSubLabel;const B=n.FormSwitch;n.FormTernaryCheckBox,n.FormText,n.FormTextColors,n.FormTextSizes;function te(t){window.enmity.plugins.registerPlugin(t)}function r(t){return window.enmity.assets.getIDByName(t)}const b={byProps:(...t)=>window.enmity.modules.filters.byProps(...t),byName:(t,o)=>window.enmity.modules.filters.byName(t,o),byTypeName:(t,o)=>window.enmity.modules.filters.byTypeName(t,o),byDisplayName:(t,o)=>window.enmity.modules.filters.byDisplayName(t,o)};function O(...t){return window.enmity.modules.bulk(...t)}function ne(...t){return window.enmity.modules.getByProps(...t)}window.enmity.modules.common;function z(t,o,l){return window.enmity.utilities.findInReactTree(t,o,l)}function oe(t){return window.enmity.patcher.create(t)}var le="AccountInfo",G="1.8.9",ae="Shows Account Information and Account Assets.",H="development",ie=[{name:"acquite",id:"581573474296791211"}],re="#ff1f84",ce={name:le,version:G,description:ae,release:H,authors:ie,color:re};const[me,se]=O(b.byProps("transitionToGuild"),b.byProps("setString"));var ue=({settings:t})=>{const o=r("ic_selection_checked_24px"),l=j.createThemedStyleSheet({icon:{color:S.ThemeColorMap.INTERACTIVE_NORMAL}});return e.createElement(e.Fragment,null,e.createElement(ee,null,e.createElement(R,{title:"Enable Account Date Information"},e.createElement(a,{label:"Time of Creation",subLabel:"Show when an account was Created",leading:e.createElement(a.Icon,{style:l.icon,source:r("ic_header_members_add_24px")}),trailing:e.createElement(B,{value:t.getBoolean("createBtn",!0),onValueChange:()=>{t.toggle("createBtn",!0),m.open({content:`Successfully ${t.getBoolean("createBtn",!0)?"enabled":"disabled"} time of Account Creation.`,source:o})}})}),e.createElement(E,null),e.createElement(a,{label:"Time of Joining Server",subLabel:"Show when an account Joined a Server",leading:e.createElement(a.Icon,{style:l.icon,source:r("ic_leave_24px")}),trailing:e.createElement(B,{value:t.getBoolean("joinBtn",!0),onValueChange:()=>{t.toggle("joinBtn",!0),m.open({content:`Successfully ${t.getBoolean("joinBtn",!0)?"enabled":"disabled"} time of Joining Server.`,source:o})}})})),e.createElement(E,null),e.createElement(R,{title:"Enable Dedicated Buttons"},e.createElement(a,{label:"Assets",subLabel:"Show dedicated button to view Account Assets",leading:e.createElement(a.Icon,{style:l.icon,source:r("img_nitro_profile_banner")}),trailing:e.createElement(B,{value:t.getBoolean("pfpBtn",!1),onValueChange:()=>{t.toggle("pfpBtn",!1),m.open({content:`Successfully ${t.getBoolean("pfpBtn",!1)?"enabled":"disabled"} dedicated Assets Button.`,source:o})}})}),e.createElement(E,null),e.createElement(a,{label:"Status",subLabel:"Show dedicated button to copy a user's Status",leading:e.createElement(a.Icon,{style:l.icon,source:r("ic_passport_24px")}),trailing:e.createElement(B,{value:t.getBoolean("statusBtn",!1),onValueChange:()=>{t.toggle("statusBtn",!1),m.open({content:`Successfully ${t.getBoolean("statusBtn",!1)?"enabled":"disabled"} dedicated Status Button.`,source:o})}})})),e.createElement(E,null),e.createElement(R,{title:"Disable Entire Plugin"},e.createElement(a,{label:"Disable Plugin",leading:e.createElement(a.Icon,{style:l.icon,source:r("ic_rulebook_16px")}),trailing:e.createElement(B,{value:t.getBoolean("masterDisable",!1),onValueChange:()=>{t.toggle("masterDisable",!1),m.open({content:`Successfully ${t.getBoolean("masterDisable",!1)?"disabled":"enabled"} AccountInfo.`,source:o})}})})),e.createElement(E,null),e.createElement(R,{title:"Source Code"},e.createElement(a,{label:"Download",subLabel:"Copy the link of the plugin to Clipboard",leading:e.createElement(a.Icon,{style:l.icon,source:r("toast_copy_link")}),trailing:a.Arrow,onPress:()=>{se.setString("https://raw.githubusercontent.com/acquitelol/account-info/main/dist/AccountInfo.js"),m.open({content:"Copied to clipboard",source:r("pending-alert")})}}),e.createElement(a,{label:"Source",subLabel:"Open the Repo of the Plugin Externally",leading:e.createElement(a.Icon,{style:l.icon,source:r("ic_leave_stage")}),trailing:a.Arrow,onPress:()=>{me.openURL("https://github.com/acquitelol/account-info")}})),e.createElement(a,{label:`Plugin Version: ${G}
Release Channel: ${H}`})))};function de(t,o,l){window.enmity.settings.set(t,o,l)}function c(t,o,l){return window.enmity.settings.getBoolean(t,o,l)}function ge(t,o,l){window.enmity.settings.toggle(t,o,l)}const[J,pe,we,T,Y,ye,be]=O(b.byDisplayName("UserProfileHeader",!1),b.byProps("getMember"),b.byProps("getGuild"),b.byProps("transitionToGuild"),b.byProps("setString"),b.byName("HeaderAvatar",!1),b.byName("ProfileBanner",!1)),I=oe("account-info"),fe=ne("getStatus","getState"),Ee={...ce,onStart(){I.instead(J,"default",(t,o,l)=>{var p,w,s,y;let u=c("AccountInfo","pfpBtn",!1),d=c("AccountInfo","statusBtn",!1),h=c("AccountInfo","createBtn",!0),D=c("AccountInfo","joinBtn",!0),q=c("AccountInfo","masterDisable",!1);const[{user:i,channel:F,type:K}]=o;try{var C=o[0].displayProfile.banner}catch{console.log("Banner doesnt exist."),de("AccountInfo","pfpToggle",!0)}if(K!==0)return l.apply(t,o);const g=j.createThemedStyleSheet({container:{marginLeft:15.5,marginRight:15.5,marginTop:17.5},header:{color:S.ThemeColorMap.HEADER_SECONDARY,opacity:.975,fontFamily:S.Fonts.DISPLAY_BOLD,textTransform:"uppercase",fontSize:12.75,letterSpacing:.25},information:{borderRadius:4,backgroundColor:S.ThemeColorMap.BACKGROUND_TERTIARY,marginTop:10,marginBottom:10},item:{color:S.ThemeColorMap.TEXT_MUTED},icon:{color:S.ThemeColorMap.INTERACTIVE_NORMAL},switchArrow:{marginRight:15.5}}),N=r("img_nitro_profile_banner"),W=r("pending-alert"),X=r("toast_copy_link"),k=r("ic_header_members_add_24px"),M=r("ic_leave_24px"),v=F==null?void 0:F.guild_id,f=v&&pe.getMember(F.guild_id,i.id),V=v&&we.getGuild(F.guild_id),_=v?((p=f==null?void 0:f.getAvatarURL)==null?void 0:p.call(f,!1,4096,!0))||((w=i==null?void 0:i.getAvatarURL)==null?void 0:w.call(i,!1,4096,!0)):(s=i==null?void 0:i.getAvatarURL)==null?void 0:s.call(i,!1,4096,!0);if(!_)return l.apply(t,o);const Z=i.discriminator%5,U=typeof _=="number"?`https://cdn.discordapp.com/embed/avatars/${Z}.png`:_==null?void 0:_.replace(".webp",".png"),A=fe.getActivities(i.id).find(Q=>Q.type===4);return q?e.createElement(e.Fragment,null,l.apply(t,o)):e.createElement(e.Fragment,null,l.apply(t,o),e.createElement(x,{style:g.container},h||D?e.createElement(e.Fragment,null,e.createElement(P,{style:g.header},"Account Information"),e.createElement(x,{style:g.information},h&&e.createElement(e.Fragment,null,e.createElement(a,{label:"Created",leading:e.createElement(a.Icon,{style:g.icon,source:k}),onPress:()=>{m.open({content:L(i.createdAt).format("LLL"),source:k})},trailing:()=>e.createElement(P,{style:g.item},L(i.createdAt).fromNow())})),h&&D&&v&&f&&e.createElement(E,null),D&&v&&f&&e.createElement(e.Fragment,null,e.createElement(a,{label:`Joined ${(y=V==null?void 0:V.name)!=null?y:""}`,leading:e.createElement(a.Icon,{style:g.icon,source:M}),onPress:()=>{m.open({content:L(f.joinedAt).format("LLL"),source:M})},trailing:()=>e.createElement(P,{style:g.item},L(f.joinedAt).fromNow())})))):e.createElement(e.Fragment,null),u||d?e.createElement(e.Fragment,null,e.createElement(P,{style:g.header},"Account Assets"),e.createElement(x,{style:g.information},u&&e.createElement(e.Fragment,null,e.createElement(a,{label:`View ${i.username}'s ${C?c("AccountInfo","pfpToggle",!0)?"Profile Picture":"Banner":"Profile Picture"}`,leading:e.createElement(a.Icon,{style:g.icon,source:N}),trailing:a.Arrow,onPress:()=>{C?c("AccountInfo","pfpToggle",!0)?T.openURL(U):T.openURL(`https://cdn.discordapp.com/banners/${i.id}/${C}.png?size=4096`):T.openURL(U)},onLongPress:C?()=>{ge("AccountInfo","pfpToggle",!0),m.open({content:`Switched to ${c("AccountInfo","pfpToggle",!0)?"profile picture":"banner"} link.`,source:N})}:()=>{m.open({content:`${i.username} does not have a banner.`,source:N})}})),u&&d&&e.createElement(E,null),A&&d&&e.createElement(e.Fragment,null,e.createElement(a,{label:`Copy ${i.username}'s Status`,leading:e.createElement(a.Icon,{style:g.icon,source:X}),trailing:a.Arrow,onPress:()=>{Y.setString(`${A.emoji.name?`:${A.emoji.name}:`:""} ${A.state?A.state:""}`),m.open({content:"Copied to clipboard",source:W})}})))):e.createElement(e.Fragment,null)))}),I.after(ye,"default",(t,[{user:o}],l)=>{var p;let w=c("AccountInfo","pfpBtn",!1),s=c("AccountInfo","masterDisable",!1);const y=(p=o==null?void 0:o.getAvatarURL)==null?void 0:p.call(o,!1,4096,!0);if(!y)return l;const u=o.discriminator%5,d=typeof y=="number"?`https://cdn.discordapp.com/embed/avatars/${u}.png`:y==null?void 0:y.replace(".webp",".png");return s||w?e.createElement(e.Fragment,null,l):e.createElement($,{onPress:()=>T.openURL(d)},l)}),I.after(be,"default",(t,[{bannerSource:o}],l)=>{let p=c("AccountInfo","pfpBtn",!1),w=c("AccountInfo","masterDisable",!1);if(typeof(o==null?void 0:o.uri)!="string"||!l)return l;const s=o.uri.replace(/(?:\?size=\d{3,4})?$/,"?size=4096").replace(".webp",".png");return w||p?e.createElement(e.Fragment,null,l):e.createElement($,{onPress:()=>T.openURL(s)},l)}),I.after(J,"default",(t,o,l)=>{const p=z(l,u=>{var d;return(d=u==null?void 0:u.props)==null?void 0:d.customStatusActivity});if(!p)return l;const w=z(l,u=>{var d,h;return(h=(d=u==null?void 0:u[2])==null?void 0:d.props)==null?void 0:h.customStatusActivity});if(!w||c("AccountInfo","statusBtn",!1)||c("AccountInfo","masterDisable",!1))return l;const s=w[2].props.customStatusActivity,y=r("pending-alert");w[2]=e.createElement($,{onPress:()=>{Y.setString(`${s.emoji.name?`:${s.emoji.name}:`:""} ${s.state?s.state:""}`),m.open({content:"Copied to clipboard",source:y})}},p)})},onStop(){I.unpatchAll()},getSettingsPanel({settings:t}){return e.createElement(ue,{settings:t})}};te(Ee);
